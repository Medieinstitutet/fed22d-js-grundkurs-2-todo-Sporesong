(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();let m={FamiljOchVaenner:"diversity_3",Studier:"import_contacts",Husdjur:"pets",Handla:"shopping_bag",Standard:""};const S=document.querySelector(".plusWrapper"),h=document.querySelector(".closeAddTask"),L=document.querySelector(".inputContainer");S.addEventListener("click",p);h.addEventListener("click",p);function p(){L.classList.toggle("open")}let o=[];f();a();function f(){const n=localStorage.getItem("tasks");o=n===null?[]:Array.from(JSON.parse(n))}function T(n,t){if(!t)return;const e=Date.now();{const c=n.querySelector(".taskDeadline");e>=t?(c.classList.add("deadlineExpired"),console.log("expired")):t-e<=432e6&&(c.classList.add("soonExpired"),console.log("soon expired"))}}function a(){const n=document.querySelector(".toDoList");n.innerHTML="",o.forEach(function(e){const c=document.createElement("li");c.setAttribute("id",e.id),c.innerHTML+=`
		<label class="checkLabel" for="check">	
		<input type="checkbox" id="check${e.id}" class="check" name="check" ${e.completed===!0?"checked":""}>
		<span class="material-symbols-outlined">${m[e.category]}</span>
		<span class="taskText ${e.completed===!0?"complete":""}">${e.text} </span>
		<span class="taskDeadline"> ${e.deadline?new Date(e.deadline).toDateString():""}</span>
			<button class="deleteTask">
				<span class="material-symbols-outlined">delete</span>
			</button>
		</label>
		  `,T(c,e.deadline),n.append(c),document.querySelector(`#check${e.id}`).addEventListener("change",y),c.querySelector(".deleteTask").addEventListener("click",g)})}function E(n){const t=document.querySelector(".toDoList"),e=document.createElement("li");e.setAttribute("id",n.id),e.classList.add("listItem"),e.innerHTML=`
	<label for="check">	
		<input type="checkbox" id="check${n.id}" class="check" name="check">
		<span class="material-symbols-outlined">${m[n.category]}</span>
		<span class="taskText">${n.text} </span>
		<span class="taskDeadline"> ${n.deadline?new Date(n.deadline).toDateString():""}</span><br>
		<button class="deleteTask">
			<span class="material-symbols-outlined">delete</span>
		</button>
	</label>
	  `,t.prepend(e)}const x=document.querySelector(".addToDoButton");x.addEventListener("click",b);function b(n){var u;n.preventDefault();const t=document.querySelector("#addToDo"),e=t.value,c=document.querySelector("#datePicker"),r=c.value?new Date(c.value).getTime():"",l=(u=document.querySelector("#categoryPicker").value)!=null?u:null,d={id:Date.now().toString(),text:e,deadline:r,category:l,completed:!1};o.unshift(d),localStorage.setItem("tasks",JSON.stringify(o)),e?(t.value="",t.focus()):document.getElementsByName("addToDo")[0].placeholder="Fyll i en uppgift",E(d),document.querySelector(`#check${d.id}`).addEventListener("change",y),document.querySelector(".deleteTask").addEventListener("click",g)}function y(n){const t=o.findIndex(function(c){return n.target.parentElement.parentElement.id===c.id});if(n.target.checked){const e=o.splice(t,1)[0];e.completed=!0,o.push(e)}else o[t].completed=!1;localStorage.setItem("tasks",JSON.stringify(o)),a()}function g(n){const t=o.findIndex(function(c){return n.target.parentElement.parentElement.parentElement.id===c.id});o.splice(t,1),localStorage.setItem("tasks",JSON.stringify(o)),a()}const k=document.querySelector("#sortItems");k.addEventListener("change",q);function q(){const n=k.value;n==="deadline"?o.sort((t,e)=>t.deadline-e.deadline):n==="text"?o.sort((t,e)=>t.text.localeCompare(e.text)):n==="tillagd"&&o.sort((t,e)=>e.id-t.id),a()}const v=document.querySelector(".sortItemsWrapper");v.addEventListener("click",I);const D=document.querySelector("#sortItems");function I(){D.classList.toggle("hidden")}document.querySelector(".all").addEventListener("click",i);document.querySelector(".social").addEventListener("click",i);document.querySelector(".study").addEventListener("click",i);document.querySelector(".pets").addEventListener("click",i);document.querySelector(".shop").addEventListener("click",i);function i(n){f(),n.target.innerHTML==="Familj och v\xE4nner"?o=o.filter(function(t){return t.category==="FamiljOchVaenner"}):n.target.innerHTML==="Studier"?o=o.filter(function(t){return t.category==="Studier"}):n.target.innerHTML==="Husdjur"?o=o.filter(function(t){return t.category==="Husdjur"}):n.target.innerHTML==="Handla"&&(o=o.filter(function(t){return t.category==="Handla"})),a()}
